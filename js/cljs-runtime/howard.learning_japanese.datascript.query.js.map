{"version":3,"sources":["howard/learning_japanese/datascript/query.cljs"],"mappings":";AAKA;;;oEAAA,pEAAME,gJAEHC;AAFH,AAAA,GAGS,AAACC,qBAAKD;AAHf;AAAA,AAAA,MAAA,KAAAH,MAAA;;;AAAA,IAAAC,YAKE,iBAAMI,IAAE,iBAAAC,WAAA,AAAA;IAAAC,WAEK,AAACE;AAFN,AAAA,0GAAAH,SAAAC,wCAAAD,SAAAC,5JAACC,kDAAAA,qEAAAA;;AAAT,iBAGO,CAAG,AAACE,gBAAML,KAAGF,vCACb,OAAOQ;;AAThB,AAAA,GAIU,AAACP,qBAAKH;AAJhB;AAAA,AAAA,MAAA,KAAAD,MAAA;;;AAAAC;;AAWA;;;uEAAA,vEAAMW,sJAEHT,IAAIU;AAFP,AAOO,mDAAA,WAAAK,vDAACD;AAAD,AAAM,IAAAE,WAAQ,AAACV;IAATW,WAAA,AAAA;IAAAC,WAAAH;AAAA,AAAA,gHAAAC,SAAAC,SAAAC,2CAAAF,SAAAC,SAAAC,vLAACC,qDAAAA,iFAAAA;2MAJP,kGAAA,qDAAA,vJAACR,qDAAS,AAACL,jHACX,AAACM,6CAAK,CAAGZ,MAAIU,rGACb,AAACG,6CAAKb,xIACN,4CAAA,5CAACc;;AAGR","names":["js/Error","%","howard.learning-japanese.datascript.query/get-page-size-by-number","num","cljs.core/int?","r","G__47993","G__47994","datascript.core/q","howard.learning-japanese.indexdb/get-ds-db","cljs.core/count","js/Math","howard.learning-japanese.datascript.query/get-page-by-num-and-offset","offset","datascript.core.datoms","cljs.core.drop","cljs.core.take","cljs.core.map","p1__47995#","G__48000","G__48001","G__48002","datascript.core/pull"],"sourcesContent":["(ns howard.learning-japanese.datascript.query\n  (:require\n   [datascript.core :as d]\n   [howard.learning-japanese.indexdb :refer [get-ds-db]]))\n\n(defn get-page-size-by-number\n  \"input a number, get the size\"\n  [num]\n  {:pre [(int? num)]\n   :post [(int? %)]}\n  (let [r (d/q '[:find ?c\n                 :where [?e :chinese ?c]]\n               (get-ds-db))]\n    (->> (/ (count r) num)\n         (.ceil js/Math))))\n\n(defn get-page-by-num-and-offset\n  \"get the page words by num and offset\"\n  [num offset]\n  (->> (d/datoms (get-ds-db) :aevt :word)\n       (drop (* num offset))\n       (take num)\n       (map :e)\n       (map #(d/pull (get-ds-db) '[:word :chinese :sentence] %))))\n\n(comment \"an useful pattern to get datoms then pull from entityId\")\n#_(->> (d/datoms (get-ds-db) :aevt :word)\n       (take 1)\n       (map :e)\n       (#(d/pull (get-ds-db) '[*] (first %))))\n\n"]}